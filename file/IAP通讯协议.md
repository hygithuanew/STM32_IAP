---
title: IAP通讯协议  
---


上位机>下位机
信息包:

| 包头    |类型     | 包数    | 保留    | 校验和    |
| --- | --- | --- | --- | --- |
|0xFFAA     | 一个字节    | 一个字节    | 0x00    |  一个字节   |

类型：

|   类型值 | 说明    |
| --- | --- |
|   0x01  |  大小为1k数据包    |
|    0x02 | 大小为2k数据包     |

数据包：

|  包头   |  包型   |包号    | 数据    | 校验    |
| --- | --- | --- | --- | --- |
|  0XFFBB   | 一个字节    | 一个字节    |  依据包型 决定    |  一个字节   |

包型：
类型：

|   类型值 | 说明    |
| --- | --- |
|   0x01  |  大小为1k数据包    |
|   0x02 |   大小为 2k数据包    |

下位机>上位机
信息应答包：

|  包头   |  状态   |  保留   |  校验和   |
| --- | --- | --- | --- |
|  0XBBAA   |  一个字节   | 0x00    | 一个字节    |

状态：

|  数值   |  说明   |
| --- | --- |
|  0x01   | 接收成功    |
|  0x02  |  校验失败    |

数据应答包：

|  包头   |  状态   |  包号   |  校验和   |
| --- | --- | --- | --- |
|  0XBBBB   |  一个字节   | 一个字节    | 一个字节    |

状态：

|  数值   |  说明   |
| --- | --- |
|  0x01   | 接收成功    |
|  0x02  |  校验失败    |
|  0x03  |  包号错误    |     
*3号错误配合包号能够告诉上位机从哪一个包开始的错误，下位机将不会保存之后发来的数据包*


程序进行状态包：

|   包头  |  状态   |  保留   |  校验和   |
| --- | --- | --- | --- |
|  0XBBCC   |  一个字节   | 一个字节    | 一个字节    |


状态：
|  数值   |  说明   |
| --- | --- |
|  0x00  | 初始    |
|  0x01  |  等待接收消息    |
|  0x02  |  擦除    |    
|  0x03  |  等待接收数据    |     
|  0x04  |  接收并存入    |     
|  0x05  |  更新完毕    |     


